if [ "$(brew update||echo none)" == "none" ]; then
	ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
	brew doctor
fi

function help-Darwin ()
{
	syntax
	echo "
Commands:
  help
  install
  info
  reinstall
  remove
  upgrade
  verify
"
}

function install-Darwin ()
{
	brew install gnu-sed
	sudo ln -s /usr/local/bin/gsed /usr/local/bin/sed
	export PATH=/usr/local/bin:$PATH
	brew install autoconf
	brew install automake
	brew install libtool
	echo "${OS} ${VER} system ready"

	cd /usr/local/src
	XERCES=xerces-c-3.2.0
	if [ ! -f ${XERCES}.tar.gz ]; then
		curl -L https://archive.apache.org/dist/xerces/c/3/sources/${XERCES}.tar.gz > ${XERCES}.tar.gz
	fi
	if [ ! -d ${XERCES} ]; then
		tar xvfz ${XERCES}.tar.gz
	fi
	cd -

	cd ${XERCES}
	if [ ! -f Makefile ]; then
		./configure --disable-static 'CFLAGS=-O2' 'CXXFLAGS=-O2'
	fi
	make install && echo "${XERCES} installed ok"
	cd -

	cd /usr/local/src
	MYSQL=mysql-connector-c-6.1.11-linux-glibc2.12-x86_64
	if [ ! -f "${MYSQL}.tar.gz" ]; then
		curl -L https://downloads.mysql.com/archives/get/file/mysql-connector-c-6.1.11-linux-glibc2.12-x86_64.tar.gz -o ${MYSQL}.tar.gz
	fi
	if [ ! -f "${MYSQL}.tar" ]; then
		gunzip ${MYSQL}.tar.gz
	fi
	if [ ! -d "${MYSQL}/bin" ]; then
		tar xf ${MYSQL}.tar
	fi
	cp -u ${MYSQL}/bin/* /usr/local/bin
	cp -Ru ${MYSQL}/include/* /usr/local/include
	cp -Ru ${MYSQL}/lib/* /usr/local/lib
	echo "${MYSQL} installed ok"
	cd -

	cd /usr/local/src
	if [ ! -d gridlabd ]; then
		git clone $GITCLONE gridlabd
	fi
	cd -

	cd /usr/local/src/gridlabd
	autoreconf -isf
	./configure --enable-silent-rules --prefix=/usr/local CFLAGS=-w CXXFLAGS=-w
	make -j10 install
	echo "gridlabd installed ok"
	cd -
}

function info-Darwin ()
{
	gridlabd --version
	gridlabd --origin
}

function remove-Darwin ()
{
	cd /usr/local/src/gridlabd
	make uninstall
	cd -
}

function upgrade-Darwin ()
{
	cd /usr/local/src/gridlabd
	$GITPULL
	make clean
	make -j10 install
	cd -
}

function reinstall-Darwin ()
{
	cd /usr/local/src/gridlabd
	$GITPULL
	make distclean
	autoreconf -isf
	./configure --enable-silent-rules --prefix=/usr/local CFLAGS=-w CXXFLAGS=-w
	make -j10 install
	cd -
}

function verify-Darwin ()
{
	gridlabd --validate
}