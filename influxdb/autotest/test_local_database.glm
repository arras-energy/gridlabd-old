// test_local_database.glm
// Copyright (C) 2020 Regents of the Leland Stanford Junior University

#set savefile=gridlabd.json

clock 
{
	timezone "US/CA/San Francisco";
	starttime "2020-01-01 00:00:00 PST";
	stoptime "2021-01-01 00:00:00 PST";
}

module influxdb
{
	default_database "test_local_database";
}

object database
{
	logname "log";

	// single dynamic tag
	logtag `mytag=test1,guid={GUID},database`;

	options NEWDB;
}

object database
{
	logname "log";

	// multiple dynamic tags
	logtag "username";
	logtag `mytag=test2,tag2=abc,hostname,guid={GUID}`;
}

module residential;
object house
{
	// just something to keep the clock running
}

// only clean if running in validation folder (useful for developers who run this model from autotest)
#ifexist ../test_local_database.glm
#on_exit 0 curl -s -XPOST 'http://${influxdb::default_hostname}:${influxdb::default_port}/query' --data 'q=drop+database+${influxdb::default_database}'  >/dev/null
#endif