<HTML>

<HEAD>
<LINK rel="stylesheet" type="text/css" href="_theme.css" />
<SCRIPT LANGUAGE="Javascript" SRC="_defaults.js"></SCRIPT>
<SCRIPT LANGUAGE="Javascript" SRC="_config.js"></SCRIPT>
<SCRIPT LANGUAGE="JavaScript">
function load_markdown(url)
{
    var r = new XMLHttpRequest()
    r.open('GET',url,false)
    r.send(null);
    if ( r.status == 200 )
    {
        var rr = new XMLHttpRequest()
        rr.open('POST','https://api.'+host+'/markdown/raw',false)
        rr.send(r.responseText)
        if ( rr.status == 200 )
        {
            var re = /\[\[[-A-Za-z_ 0-9]+\]\]/g
            function to_url(tag)
            {
                ref = tag.substr(2,tag.length-4)
                return "<A HREF=\"?owner=" + owner + "&project=" + project + "&branch=" + branch + "&doc=" + ref + ".md\">" + ref + "</A>"
            }
            var ro = re[Symbol.replace](rr.responseText,to_url)
            document.writeln(ro)
        }
        else //if ( rr.status != 404 )
        {                
            throw ('<FONT COLOR=RED>[ERROR ' + rr.status + ' ['+url+'] '+rr.responseText+'</FONT><BR/>');
        }
    }
    else //if ( r.status != 404 )
    {
        throw ('<FONT COLOR=RED>[ERROR ' + r.status + ' ['+url+'] '+r.responseText+'</FONT><BR/>');
    }
}    
</SCRIPT>
</HEAD>

<BODY>

<SCRIPT LANGUAGE="JavaScript">
    var banner = "GridLAB-D Documentation";
    var now = new Date();
    var copyright = "Copyright (C) " + now.getFullYear() + ", Regents of the Leland Stanford Junior University";
    var query = new URLSearchParams(window.location.search);
    var href = location.origin+location.pathname.substring(0,location.pathname.lastIndexOf('/')+1);
    // TODO: The replacement <name>.com ->raw.<name>usercontent.com is probably not general, but works for github.com.
    //       Suggest using a static config document on the host to implement this translation.
    var base = 'https://raw.'+host.replace(".com","usercontent.com")+'/' + owner + '/' + project + '/' + branch + '/docs/';
</SCRIPT>

Source document:
<SCRIPT LANGUAGE="JavaScript">
    url = 'https://'+host+'/'+owner+'/'+project+'/tree/'+branch+'/docs/' + doc;
    document.write('<A TARGET="_new" ID="source" HREF="' + url + '">' + url + '</A>');
</SCRIPT>
<HR/>

<SCRIPT LANGUAGE="JavaScript">
    document.writeln('<DIV ID="header" CLASS="header">')
    try 
    { 
        load_markdown(base+'_header.md') ;
    } 
    catch (e) 
    {
        document.writeln(banner);
    }
    document.writeln('<HR/></DIV ID">')
    try 
    {        
        load_markdown(base+doc);
    }
    catch (err)
    {
        document.writeln("ERROR: "+err.message)
    }
    document.writeln('<DIV ID="footer" CLASS="footer">')
    try 
    { 
        load_markdown(base+'_footer.md') 
        document.writeln('<P/>'+copyright);
    } 
    catch (e) 
    {
        document.writeln(copyright);
    }
</SCRIPT>
<HR/>
</BODY>

</HTML>